<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Vue-BoolZapp</title>
    <!-- Importo CSS -->
    <link rel="stylesheet" href="./css2/style.css" />
    <!-- Importo Bootstrap -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.3/css/bootstrap.min.css"
        integrity="sha512-jnSuA4Ss2PkkikSOLtYs8BlYIeeIK1h99ty4YfvRPAlzr377vr3CXDb7sb7eEEBYjDtcYj+AjBH3FLv5uSJuXg=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
        <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

    <!-- Importo Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <!-- Importo Axios -->
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>

</head>

<body>
    <!-- APP Ã¨ il nostro contenitore generale -->
    <div id="app">
        <div class="container-fluid">
            <div class="container">
                <div class="leftSide">
                    <!-- HEADER -->
                    <div class="header">
                        <div class="userImg">
                            <img src="./IMG/userImg.jpg" class="cover">
                        </div>
                        <div class="userName">
                            <span><b>Matteo Calonaci</b></span>
                        </div>
                        <ul class="icons">
                            <li><i class="fa-regular fa-circle"></i></li>
                            <li><i class="fa-regular fa-message"></i></li>
                            <li><i class="fa-solid fa-ellipsis-vertical"></i></li>
                        </ul>
                    </div>



                    <!-- NOTIFICA -->
                    <div class="notifica">
                        <div class="notificaContainer">
                            <i class="fa-solid fa-bell-slash"></i>
                            <div class="notificheText">
                                <span> <b>Ricevi notifiche di nuovi messaggi</b></span>
                                <span class="underline nero"> Attiva notifiche desktop</span>
                            </div>
                        </div>
                    </div>



                    <!-- SEARCH CHAT -->
                    <div class="searchChat">
                        <input v-model="searchInput" type="text"
                            placeholder="Cerca o inizia una nuova chat">
                    </div>



                    <!-- CHAT LIST -->
                    <div class="chatList">
                        <div class="col-12 headerChat" @click="cliccato(contact.id)" v-for="contact, i in filteredContacts">                            <div class=" col-2 userImg">
                                <img :src="contact.avatar" class="cover">
                            </div>
                            <div class=" col-7 chatPreview">
                                <span> <b>{{contact.name}}</b></span>
                                            <span class="nero"> {{contact.messages[contact.messages.length-1].message}}</span>
                                <!-- <span class="nero"> Ultimo messaggio inviato</span> -->
                            </div>
                            <p class=" col-2 orario nero">12.00</p>
                            <!-- {{contact.messages[contact.messages.length-1].date}} -->
                        </div>
                    </div>
                </div>



                <!-- RIGHT SIDE -->
                <div class="rightSide">

                    <!-- HEADER CHAT UTENTE -->
                    <div class="header">
                        <div class=" userImg">
                            <img :src="contacts[userClicked].avatar" class="cover">
                        </div>
                        <div class="notificheTextRight">
                            <span> <b>{{contacts[userClicked].name}}</b></span>
                            <span class="nero"> Ultimo accesso oggi alle 22:10</span>
                        </div>

                        <ul class="icons">
                            <li><i class="fa-solid fa-magnifying-glass"></i> </li>
                            <li><i class="fa-solid fa-paperclip"></i></li>
                            <li><i class="fa-solid fa-ellipsis-vertical"></i></li>
                        </ul>
                    </div>


                    <!-- CORPO DELLA CHAT -->

                    <div class="chatBox">
                        <template @click="cliccato(i)" v-for=" element, index in contacts[userClicked].messages">
                            <div class="message myMessage" v-if="element.status =='sent'">
                                <div class="options">
                                    <a class="delite" href="#" @click.prevent="deleteMessage(index)"><i class="fa-solid fa-trash m-1"></i></a>
                                    <a class="mod" href="#" @click.prevent="editMessage(index)"><i class="fa-solid fa-ellipsis-vertical m-1"></i></a>
                                </div>
                            
                                <div v-if="editingMessage !== index" class="message myMessage">
                                    <p style="max-width: 18rem;">{{ element.message }} <br> <span>{{ element.date }}</span></p>
                                </div>
                                <div v-else class="mod-input">
                                    <input style="width: 15rem;" v-model="element.message" @blur="saveMessage(index, element.message)" type="text">
                                </div>
                            </div>
                            <div class="message friendMessage" v-else>
                                <div class="options">
                                    <a class="delite" href="#" @click.prevent="deleteMessage(index)"><i class="fa-solid fa-trash m-1"></i></a>
                                </div>
                                <p>{{element.message}} <br> <span>{{element.date}}</span></p>
                            </div>

                        </template>
                    </div>


                    <!-- CHATBOX -->
                    <div class="chatBoxInput">
                        <i class="fa-regular fa-face-smile"></i>

                        <input @keyup.enter="printMessage()" v-model:="userInput">
                        <i class="fa-solid fa-microphone"></i>
                    </div>
                </div>
            </div>

        </div>

    </div>





    </div>

    </div>


    <!-- Importo VueJs -->
    <script src='https://unpkg.com/vue@3/dist/vue.global.js'></script>
    <!-- Importo JavaScript -->
    <script src="./js 2/main.js"></script>
</body>
</body>

</html>